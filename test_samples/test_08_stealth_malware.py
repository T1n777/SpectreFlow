"""
TEST 8: Stealth Malware
Expected: SUSPICIOUS but low confidence, MEDIUM risk
Performs suspicious actions slowly and quietly
"""
import socket
import time
import tempfile
import os

print("Running background tasks...")

# Very slow network probe
time.sleep(2)
try:
    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    sock.settimeout(1)
    sock.connect_ex(("127.0.0.1", 4444))
    sock.close()
except:
    pass

time.sleep(3)

# Create one suspicious file quietly
temp_dir = tempfile.gettempdir()
filepath = os.path.join(temp_dir, "update.exe")
try:
    with open(filepath, 'w') as f:
        f.write("")
    time.sleep(2)
    os.remove(filepath)
except:
    pass

time.sleep(2)
print("Tasks complete")
